<!-- MODAL -->
<div
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
  *ngIf="showModal"
>
  <!-- MODAL CONTENT -->
  <div
    class="bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 transition-all duration-300"
  >
    <form [formGroup]="listForm" (ngSubmit)="submitForm()">
      <!-- HEADER -->
      <div class="flex justify-between items-center px-6 py-4 border-b">
        <h2 class="text-xl font-semibold text-gray-800">
          Créer une nouvelle liste
        </h2>
        <button
          type="button"
          (click)="closeModal()"
          class="text-gray-400 hover:text-gray-600 text-2xl leading-none"
        >
          ✕
        </button>
      </div>

      <!-- BODY -->
      <div class="px-6 py-6 space-y-5">
        <!-- NOM -->
        <div>
          <label for="nom" class="block text-sm font-medium text-gray-700 mb-1"
            >Nom</label
          >
          <input
            id="nom"
            type="text"
            formControlName="nom"
            placeholder="Ex : Mes lieux préférés"
            class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition"
          />
        </div>

        <!-- DESCRIPTION -->
        <div>
          <label
            for="description"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Description</label
          >
          <textarea
            id="description"
            rows="4"
            formControlName="description"
            placeholder="Décris brièvement cette liste..."
            class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition resize-none"
          ></textarea>
        </div>

        <!-- SWITCH PRIVÉ -->
        <div class="flex items-center justify-between">
          <label for="isPrivate" class="text-sm font-medium text-gray-700">
            Rendre cette liste privée
          </label>
          <button
            type="button"
            (click)="togglePrivacy()"
            [class]="
              (listForm.value.isPrivate
                ? 'bg-indigo-600 justify-end'
                : 'bg-gray-300 justify-start') +
              ' w-12 h-6 flex items-center rounded-full p-1 transition-colors duration-300'
            "
          >
            <span
              class="w-4 h-4 bg-white rounded-full shadow transform transition-transform duration-300"
              [class.translate-x-0]="!listForm.value.isPrivate"
              [class.translate-x-6]="listForm.value.isPrivate"
            ></span>
          </button>
        </div>
      </div>

      <!-- FOOTER -->
      <div class="px-6 py-4 border-t flex justify-end gap-3">
        <button
          type="button"
          (click)="closeModal()"
          class="px-4 py-2 rounded-md text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 transition"
        >
          Annuler
        </button>
        <button
          type="submit"
          class="px-4 py-2 rounded-md text-sm bg-indigo-600 hover:bg-indigo-700 text-white transition"
          [disabled]="listForm.invalid"
        >
          Créer
        </button>
      </div>
    </form>
  </div>
</div>
